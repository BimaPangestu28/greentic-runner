// SPDX-License-Identifier: MIT
package greentic:state@1.0.0;

use greentic:interfaces-types/types@0.1.0;

interface state-store {
  use greentic:interfaces-types/types@0.1.0.{state-key, tenant-ctx};

  record host-error {
    code: string,
    message: string,
  }

  enum op-ack { ok }

  read: func(key: state-key, ctx: option<tenant-ctx>) -> result<list<u8>, host-error>;

  write: func(
    key: state-key,
    bytes: list<u8>,
    ctx: option<tenant-ctx>
  ) -> result<op-ack, host-error>;

  delete: func(key: state-key, ctx: option<tenant-ctx>) -> result<op-ack, host-error>;
}

world store {
  import state-store;
}
